<!doctype html>
<html xmlns:th="http://www.thymeleaf.org">
  <head>
    <meta charset="UTF-8" />
    <meta name="viewport" content="width=device-width, initial-scale=1.0" />
    <title>Customer Details - DSS</title>
    <link rel="stylesheet" th:href="@{/css/neo-dashboard.css}" />
  </head>
  <body>
    <nav class="navbar">
      <div class="navbar-brand">DSS Admin · Customer details</div>
      <div class="navbar-user">
        <a th:href="@{/admin/customers}" class="btn-link">Back to customers</a>
      </div>
    </nav>

    <div class="container">
      <section class="detail-hero">
        <div>
          <p class="segment-label">Customer</p>
          <h1>
            #<span th:text="${customer.customerId}">12345</span>
            <span
              class="segment-pill"
              th:classappend="${customer.customerSegment} != null ? ' ' + #strings.toLowerCase(customer.customerSegment) : ''"
              th:text="${customer.customerSegment}"
              >VIP</span
            >
          </h1>
          <p>
            <strong th:text="${customer.country}">United Kingdom</strong>
            ·
            <span
              class="status-pill"
              th:classappend="${#strings.equalsIgnoreCase(customer.status, 'Active')} ? ' success' : (${#strings.equalsIgnoreCase(customer.status, 'Inactive')} ? ' danger' : ' warning')"
              th:text="${customer.status}"
              >Active</span
            >
          </p>
        </div>
      </section>

      <div class="dashboard-grid">
        <article class="stat-card">
          <div class="stat-card-title">Total orders</div>
          <div class="stat-card-value" th:text="${customer.totalOrders}">25</div>
        </article>
        <article class="stat-card">
          <div class="stat-card-title">Total revenue</div>
          <div class="stat-card-value" th:text="${'$' + #numbers.formatDecimal(customer.totalRevenue, 0, 'COMMA', 0, 'POINT')}">$5,234</div>
        </article>
        <article class="stat-card">
          <div class="stat-card-title">Avg order value</div>
          <div class="stat-card-value" th:text="${'$' + #numbers.formatDecimal(customer.averageOrderValue, 0, 'COMMA', 0, 'POINT')}">$209</div>
        </article>
        <article class="stat-card">
          <div class="stat-card-title">Total items</div>
          <div class="stat-card-value" th:text="${customer.totalItems}">150</div>
        </article>
        <article class="stat-card">
          <div class="stat-card-title">Unique products</div>
          <div class="stat-card-value" th:text="${customer.uniqueProductsPurchased}">45</div>
        </article>
        <article class="stat-card">
          <div class="stat-card-title">Return rate</div>
          <div class="stat-card-value" th:text="${#numbers.formatDecimal(customer.returnRate, 0, 1) + '%'}">5.2%</div>
        </article>
      </div>

      <div class="detail-grid">
        <article class="detail-card">
          <h2>Purchase history</h2>
          <ul class="detail-list">
            <li>
              <span class="detail-label">First purchase</span>
              <span class="detail-value" th:text="${customer.firstPurchaseDate}">2010-12-01</span>
            </li>
            <li>
              <span class="detail-label">Last purchase</span>
              <span class="detail-value" th:text="${customer.lastPurchaseDate}">2011-12-09</span>
            </li>
            <li>
              <span class="detail-label">Days since last order</span>
              <span class="detail-value" th:text="${customer.daysSinceLastPurchase != null ? customer.daysSinceLastPurchase + ' days' : 'N/A'}">5 days</span>
            </li>
            <li>
              <span class="detail-label">Status</span>
              <span class="detail-value" th:text="${customer.status}">Active</span>
            </li>
          </ul>
        </article>

        <article class="detail-card">
          <h2>Order statistics</h2>
          <ul class="detail-list">
            <li>
              <span class="detail-label">Returned orders</span>
              <span class="detail-value" th:text="${customer.returnedOrders}">3</span>
            </li>
            <li>
              <span class="detail-label">Return rate</span>
              <span class="detail-value" th:text="${#numbers.formatDecimal(customer.returnRate, 0, 2) + '%'}">12%</span>
            </li>
            <li>
              <span class="detail-label">Segment</span>
              <span class="detail-value" th:text="${customer.customerSegment}">VIP</span>
            </li>
          </ul>
        </article>
      </div>

      <article class="detail-card" th:if="${customer.topProductStockCode != null}">
        <h2>Top purchased product</h2>
        <ul class="detail-list">
          <li>
            <span class="detail-label">Product code</span>
            <span class="detail-value" th:text="${customer.topProductStockCode}">85123A</span>
          </li>
          <li>
            <span class="detail-label">Description</span>
            <span class="detail-value" th:text="${customer.topProductDescription}">WHITE HANGING HEART T-LIGHT HOLDER</span>
          </li>
          <li>
            <span class="detail-label">Units purchased</span>
            <span class="detail-value" th:text="${customer.topProductQuantity}">48</span>
          </li>
        </ul>
      </article>
    </div>
  </body>
</html>
